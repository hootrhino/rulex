(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0db4af"],{"6ef0":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("el-container",{staticStyle:{height:"800px",border:"1px solid #eee"}},[o("el-main",[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v(" 输出目标管理")])]),o("el-button",{attrs:{type:"primary",icon:"el-icon-help"},on:{click:function(){e.createDialogVisible=!0}}},[t._v("新 建")]),o("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},on:{click:t.refreshList}},[t._v("刷 新")]),o("el-dialog",{attrs:{title:"新建目标",visible:t.createDialogVisible,width:"800px",top:"2%","show-close":!1,"before-close":function(){}},on:{"update:visible":function(e){t.createDialogVisible=e}}},[o("el-form",{ref:"createForm",attrs:{model:t.createForm,"status-icon":"",rules:t.createFormRules}},[o("el-form-item",{attrs:{label:"目标名称","label-width":"90px","label-position":"left",prop:"name"}},[o("el-input",{attrs:{placeholder:"输出目标名称"},model:{value:t.createForm.name,callback:function(e){t.$set(t.createForm,"name",e)},expression:"createForm.name"}})],1),o("el-form-item",{attrs:{label:"目标类型","label-width":"90px","label-position":"left",prop:"type"}},[o("el-select",{staticStyle:{width:"500px"},attrs:{placeholder:"输出目标类型",filterable:""},on:{change:t.onSelectChange},model:{value:t.createForm.type,callback:function(e){t.$set(t.createForm,"type",e)},expression:"createForm.type"}},[o("el-option",{attrs:{label:"MQTT 桥接",value:"MQTT"}}),o("el-option",{attrs:{label:"MONGO 单节点",value:"MONGO_SINGLE"}})],1)],1),o("el-form-item",{attrs:{label:"目标配置","label-width":"90px","label-position":"left",prop:"config"}},[o("v-jsoneditor",{staticStyle:{height:"400px"},attrs:{options:t.options},model:{value:t.createForm.config,callback:function(e){t.$set(t.createForm,"config",e)},expression:"createForm.config"}})],1),o("el-form-item",{attrs:{label:"备注信息","label-width":"90px","label-position":"left",prop:"description"}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"备注信息"},model:{value:t.createForm.description,callback:function(e){t.$set(t.createForm,"description",e)},expression:"createForm.description"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(){e.createDialogVisible=!1,e.createForm={}}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.createOutEnd}},[t._v("提 交")])],1)],1)],1),o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.outendsTableData,border:""}},[o("el-table-column",{attrs:{prop:"uuid",label:"UUID",width:"360px"}}),o("el-table-column",{attrs:{prop:"type",label:"类型",width:"200px",filters:[{text:"MQTT 协议桥接",value:"MQTT"},{text:"HTTP 协议接入",value:"HTTP"}],"filter-method":t.filterType}}),o("el-table-column",{attrs:{prop:"name",label:"名称"}}),o("el-table-column",{attrs:{prop:"description",label:"信息"}}),o("el-table-column",{attrs:{prop:"state",label:"状态",filters:[{text:"正常",value:1},{text:"异常",value:0}],"filter-method":t.filterState,width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.state?o("el-tag",{attrs:{type:"success"}},[t._v("正常")]):o("el-tag",{attrs:{type:"danger"}},[t._v("异常")])]}}])}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.details(e.row)}}},[t._v("详情")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.removeOutEnd(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"输出目标详情",visible:t.detailDialogVisible,width:"30%"},on:{"update:visible":function(e){t.detailDialogVisible=e}}},[o("v-jsoneditor",{staticStyle:{height:"400px"},attrs:{options:t.detailOptions},model:{value:t.outEndDetail,callback:function(e){t.outEndDetail=e},expression:"outEndDetail"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(){t.detailDialogVisible=!1,t.outEndDetail={}}}},[t._v("确 定")])],1)],1)],1)],1)},l=[],i=a("2b0e"),r=a("27f7"),n=a("b775");function s(){return Object(n["a"])({url:"outends",method:"get"})}function c(e){return Object(n["a"])({url:"outends",method:"post",data:e})}function u(e){return Object(n["a"])({method:"delete",url:"outends?uuid="+e})}var d=a("5c96"),p={MQTT:{host:"127.0.0.1",port:1883,topic:"rulex-client-topic-1",clientId:"rulex1",username:"rulex1",password:"******"},MONGO_SINGLE:{mongoUrl:"mongodb://user:password@127.0.0.1:27017/?authSource=admin",database:"rulex",collection:"rulex_data"}},m=p;i["default"].use(r["a"]);var f={components:{VJsoneditor:r["a"]},name:"OutEnd",methods:{onSelectChange:function(e){this.createForm.config=m[e]},removeOutEnd:function(e){var t=this;u(e.uuid).then((function(e){Object(d["Message"])({message:e.msg,type:"success",duration:5e3}),t.getList()}))},details:function(e){this.outEndDetail=e,this.detailDialogVisible=!0},refreshList:function(){this.getList(),Object(d["Message"])({message:"刷新成功",type:"success",duration:5e3})},createOutEnd:function(){var e=this,t=this;this.$refs["createForm"].validate((function(a){return!!a&&(c(e.createForm).then((function(a){Object(d["Message"])({message:"创建成功",type:"success",duration:5e3}),e.createDialogVisible=!1,e.createForm={},t.getList()})),!0)}))},getList:function(){var e=this;s().then((function(t){e.outendsTableData=t.data}))},filterType:function(e,t){return t.type===e},filterState:function(e,t){return t.state===e}},created:function(){this.getList()},data:function(){return{options:{modes:["tree","code","preview"],mode:"code",ace:ace},detailOptions:{modes:["code"],mode:"code",ace:ace},detailDialogVisible:!1,outEndDetail:{},createDialogVisible:!1,createForm:{type:null,name:null,description:null,config:{example_config_key:"example_config_value"}},createFormRules:{type:[{required:!0,message:"输入类型",trigger:["blur","change"]}],name:[{required:!0,message:"输入名称",trigger:["blur","change"]}],description:[{required:!0,message:"输入描述",trigger:["blur","change"]}],config:[{required:!0,message:"输入配置",trigger:["blur","change"]}]},outendsTableData:[]}}},b=f,g=a("2877"),h=Object(g["a"])(b,o,l,!1,null,null,null);t["default"]=h.exports}}]);